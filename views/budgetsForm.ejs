<%- include('partials/head.ejs') %>
<%- include('partials/header.ejs') %>

<h2><%= budget._id ? "Edit Budget" : "Add New Budget" %></h2>

<form action="<%= action %>" method="POST">
  <input type="hidden" name="_csrf" value="<%= _csrf %>" />

  <div>
    <label for="name">Budget Name:</label>
    <input type="text" id="name" name="name" value="<%= budget.name || '' %>" required />
  </div>

  <div>
    <label for="limit">Limit:</label>
    <input type="number" id="limit" name="limit" value="<%= budget.limit || '' %>" required />
  </div>

  <div>
    <label for="period">Period:</label>
    <select id="period" name="period" required>
      <option value="">Select one</option>
      <option value="weekly" <%= budget.period === 'weekly' ? 'selected' : '' %>>Weekly</option>
      <option value="monthly" <%= budget.period === 'monthly' ? 'selected' : '' %>>Monthly</option>
      <option value="yearly" <%= budget.period === 'yearly' ? 'selected' : '' %>>Yearly</option>
    </select>
  </div>

  <% if (budget._id) { %>
    <div>
      <label>
        <input type="checkbox" name="active" <%= budget.active ? 'checked' : '' %> />
        Active
      </label>
    </div>
  <% } %>

  <button type="submit"><%= budget._id ? "Update Budget" : "Create Budget" %></button>
  <a href="/api/v1/budgets">Cancel</a>
</form>

<%- include('partials/footer.ejs') %>

<%- include('partials/head') %>
<%- include('partials/header') %>

<div class="container">
  <h2>Your Expenses</h2>

  <!-- Add new expense -->
  <a href="/api/v1/expenses/add"><button type="button">Add New Expense</button></a>

  <% if (!expenses || expenses.length === 0) { %>
    <p>No expenses found.</p>
  <% } else { %>
    <ul id="expenseList">
      <% expenses.forEach(exp => { %>
        <li>
          <%= exp.description %> - $<%= exp.amount %> (<%= exp.category %>) on
          <%= new Date(exp.date).toLocaleDateString() %>

          <!-- Edit -->
          <a href="/api/v1/expenses/edit/<%= exp._id %>">
            <button type="button">Edit</button>
          </a>

          <!-- Delete -->
          <form method="POST" action="/api/v1/expenses/<%= exp._id %>?_method=DELETE" style="display:inline;">
            <input type="hidden" name="_csrf" value="<%= _csrf %>" />
            <button type="submit">Delete</button>
          </form>
        </li>
      <% }) %>
    </ul>
  <% } %>
</div>

<%- include('partials/footer') %>
